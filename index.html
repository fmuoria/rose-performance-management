<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quarterly Performance Scorecard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    /* Original CSS styles remain unchanged */
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; margin: 0;}
    .container { max-width: 1200px; margin: 36px auto; background: #fff; border-radius: 18px; box-shadow: 0 10px 32px rgba(80,60,120,0.15); padding: 0;}
    h1 { text-align: center; color: #2c3e50; margin-top: 0; padding: 32px 0 10px 0;}
    .tabs { display: flex; border-bottom: 2px solid #d1d5db; background: #f7f7fd;}
    .tab-btn { flex: 1; padding: 18px 0; text-align: center; border: none; background: none; font-size: 1.1rem; color: #6c6c96; cursor: pointer; font-weight: 600; transition: all .18s;}
    .tab-btn.active { color: #4b2994; background: #fff; border-bottom: 3px solid #667eea;}
    .tab-content { display: none; padding: 38px 38px 25px 38px;}
    .tab-content.active { display: block;}
    .info-row { display: flex; gap: 30px; margin-bottom: 22px; flex-wrap: wrap; }
    .info-col { flex: 1; min-width: 200px;}
    label { font-weight: bold; color: #444; }
    select, input[type="number"], input[type="text"], textarea { font-size: 1rem; padding: 6px; width: 100%; border: 1.5px solid #e1e6ef; border-radius: 5px; background: #f8fafc; margin-top: 2px; }
    textarea { resize: vertical; min-height: 32px; max-height: 90px;}
    input[type="number"]:disabled, input[type="text"]:disabled, textarea:disabled { background: #f1f1f6; color: #999;}
    .btn-row { text-align: center; margin: 28px 0 8px 0;}
    button { background: linear-gradient(90deg, #667eea 70%, #764ba2 100%); color: #fff; font-weight: bold; font-size: 1rem; border: none; border-radius: 7px; padding: 12px 34px; margin: 7px 10px; cursor: pointer; box-shadow: 0 2px 8px rgba(80,60,120,0.10); transition: transform 0.08s;}
    button:active { transform: scale(0.97);}
    .scorecard-table { width: 100%; border-collapse: collapse; margin: 25px 0 10px 0; background: #fafafa;}
    .scorecard-table th, .scorecard-table td { border: 1px solid #d1d5db; padding: 10px 8px; font-size: 1rem; vertical-align: top;}
    .scorecard-table th { background: #f2f6fa; color: #34495e; font-weight: bold;}
    .scorecard-section-header { background: #667eea; color: #fff; font-size: 1.1rem; letter-spacing: 0.05em;}
    .legend, .score-summary { margin: 25px 0 5px 0; padding: 15px 18px; border-radius: 10px; font-size: 1rem;}
    .legend { background: #fdf6e3; color: #856404;}
    .score-summary { background: #eafaf1; color: #1e824c; }
    .empty-msg { text-align:center; color:#8b8ba0; font-size:1.05rem; padding:32px 0;}
    .signin-bar { background: #f2f6fa; margin: 0; padding: 13px 30px; border-radius: 18px 18px 0 0; border-bottom: 1.5px solid #d1d5db; display: flex; align-items: center; justify-content: space-between;}
    .signin-bar .user { font-size: 1.08rem; color: #523b6a; }
    .signin-bar .signout-btn { background: #e33; color: #fff; font-weight: bold; border: none; border-radius: 6px; padding: 8px 18px; margin-left: 12px; cursor: pointer; }
    #g_id_signin { display:inline-block; vertical-align:middle;}
    @media (max-width: 900px) { .container { padding: 0; } .tab-content { padding: 18px 1vw 12px 1vw; } .info-row { flex-direction: column; gap: 10px;} }
    @media (max-width: 600px) { .tab-content { padding: 7px 0; } .scorecard-table th, .scorecard-table td { font-size: 0.93rem; } }
  </style>
</head>
<body>
<div class="container">
  <!-- Sign-in bar -->
  <div class="signin-bar" id="signinBar">
    <div id="userStatus"></div>
    <div id="g_id_signin"></div>
  </div>
  <h1>Quarterly Performance Scorecard</h1>
  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('scorecardTab', this)">Scorecard</button>
    <button class="tab-btn" onclick="showTab('reportsTab', this)">Reports</button>
    <button class="tab-btn" onclick="showTab('dashboardTab', this)">Dashboard</button>
  </div>
  <!-- Tab Contents -->
  <!-- SCORECARD TAB -->
  <div class="tab-content active" id="scorecardTab">
    <form id="scorecardForm" autocomplete="off" onsubmit="event.preventDefault(); saveScorecard();">
      <div class="info-row">
        <div class="info-col">
          <label for="employeeName">Employee's Name:</label><br>
          <input type="text" id="employeeName" required>
        </div>
        <div class="info-col">
          <label for="employeeJob">Job Title:</label><br>
          <input type="text" id="employeeJob" required>
        </div>
        <div class="info-col">
          <label for="division">Division:</label><br>
          <input type="text" id="division" required>
        </div>
        <div class="info-col">
          <label for="level">Level:</label><br>
          <input type="text" id="level" disabled>
        </div>
        <div class="info-col">
          <label for="periodYear">Year:</label><br>
          <select id="periodYear">
            <option value="2025">2025</option>
            <option value="2024">2024</option>
          </select>
        </div>
        <div class="info-col">
          <label for="periodMonth">Month:</label><br>
          <select id="periodMonth" required>
            <option value="">Select</option>
            <option value="01">January</option>
            <option value="02">February</option>
            <option value="03">March</option>
            <option value="04">April</option>
            <option value="05">May</option>
            <option value="06">June</option>
            <option value="07">July</option>
            <option value="08">August</option>
            <option value="09">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
        </div>
        <div class="info-col">
          <label for="periodWeek">Week:</label><br>
          <select id="periodWeek" required>
            <option value="">Select</option>
            <option value="1">Week 1</option>
            <option value="2">Week 2</option>
            <option value="3">Week 3</option>
            <option value="4">Week 4</option>
            <option value="5">Week 5</option>
          </select>
        </div>
      </div>
      <!-- Scorecard Table -->
      <table class="scorecard-table" id="scorecardTable">
        <thead>
          <tr>
            <th>Dimension</th>
            <th>Performance Measure</th>
            <th>Target</th>
            <th>Actual<br>(employee input)</th>
            <th>% Used/Savings</th>
            <th>Rating<br>(1-5)</th>
            <th>Weight<br>(%)</th>
            <th>Weighted<br>Average</th>
            <th>Manager's Comments</th>
          </tr>
        </thead>
        <tbody id="scorecardBody"></tbody>
      </table>
      <div class="btn-row">
        <button type="submit">Save</button>
        <button type="reset" onclick="resetScorecard()">Reset</button>
      </div>
    </form>
    <div class="score-summary" id="scoreSummary"></div>
    <div class="legend">
      <b>Score Legend:</b><br>
      1.00–2.99 Below Target;&nbsp; 3.00 Target Met;&nbsp; 3.1–4.99 Exceeds Target;&nbsp; 5.00 Far Exceeds Target
    </div>
  </div>
  <!-- REPORTS TAB -->
  <div class="tab-content" id="reportsTab">
    <h2>Your Weekly Submissions</h2>
    <div id="reportsTableWrap"></div>
  </div>
  <!-- DASHBOARD TAB -->
  <div class="tab-content" id="dashboardTab">
    <h2>Performance Dashboard</h2>
    <div id="dashboardWrap"></div>
  </div>
</div>
<script>
  /* Include the updated JavaScript code for calculations, financial section fixes, and total summary updates */
</script>
</body>
</html>
